<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="./Players.js"></script>
    <script src="./Bird.js"></script>
    <link href="/style.css" rel="stylesheet" type="text/css" />
    <title>Bird Game</title>
  </head>
  <body class="background-image">
    <div id="bird1-img">
      <img id="bird1" src="leftGroundBird.png" alt="Bird 1"/>
    </div>
    <img id="cloud1" src="cloudPlatform.png" alt="Cloud Platform"/>
  </body>
</html>

<style>
  .background-image {
    background-image: url("background.png");
	  background-size: cover;
  }
  #bird1-img {
    position: absolute;
    left: 500px;
    top: 100px;
  }
  #cloud1 {
    position: absolute;
    left: 400px;
    top: 155px;
  }
</style>

<script>
  $(document).ready(function() {
    var bird1 = new Bird("blue");
    var jumping = false
    var right = false;

    window.setInterval(platformCollision, 300);

    function jump() {
      if (!jumping) {
        jumping = true;
        bird1.jump();
        setTimeout(land, 1000);
        direction()
      }
    }

    function land() {
      jumping = false;
      bird1.fall()
      { document.getElementById('bird1-img').style.top = bird1.y + 'px'};
      direction()
    }

    function platformCollision() {
      if (bird1.x > 350 && bird1.x < 950 && bird1.y === 100) {
        console.log("ON CLOUD");
      } else if (!jumping) {
        if (bird1.y > 0) {
          bird1.fall();
          { document.getElementById('bird1-img').style.top = bird1.y + 'px'}
        }
      }
    }

    function direction() {
      if (right && jumping) {
        $('#bird1').attr("src", "rightJumpBird.png");
      } else if (right) {
        $('#bird1').attr("src", "rightGroundBird.png");
      } else if (!right && jumping) {
        $('#bird1').attr("src", "leftJumpBird.png");
      } else if (!right) {
        $('#bird1').attr("src", "leftGroundBird.png");
      }
    }

    $(document).keypress(function(event){
      var key = (event.keyCode ? event.keyCode : event.which);
      var ch=String.fromCharCode(key)
      switch (ch.toLowerCase()) {
        case 'a':
          bird1.moveLeft();
          { document.getElementById('bird1-img').style.left = bird1.x + 'px'}
          right = false;
          direction()
          break;
        // case 's':
        //   alert('IT WAS DOWN')
        //   break;
        case 'd':
           bird1.moveRight();
           { document.getElementById('bird1-img').style.left = bird1.x + 'px'}
           right = true;
           direction()
          break;
        case 'w':
          if (!jumping) {
            $('#bird1').attr("src", "rightJumpBird.png");
            jump();
            { document.getElementById('bird1-img').style.top = bird1.y + 'px'}
          }
          break;
        case ' ':
          if (!jumping) {
            $('#bird1').attr("src", "rightJumpBird.png");
            jump();
            { document.getElementById('bird1-img').style.top = bird1.y + 'px'}
          }
      }
    });
  });
</script>
